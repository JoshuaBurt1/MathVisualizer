<!DOCTYPE html>
<html>
<head>
    <title>Math Visualizer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
</head>

<body>
    <h1>Math Visualizer</h1>

    <div class="controls">
        <div class="control-group">
            <label>1. SEQUENCE TYPE</label>
            <select id="formulaType" onchange="toggleCustomInput(); plotData();">
                <option value="minus">2^p - 1 (Mersenne)</option>
                <option value="plus">2^p + 1 (Fermat)</option>
                <option value="custom">Custom Formula (use 'n')</option>
            </select>
        </div>

        <div class="control-group" id="customFormulaGroup" style="display: none;">
            <label>ENTER FORMULA (e.g., n^2-n+40)</label>
            <input type="text" id="customFormula" value="n^2" placeholder="n^2">
        </div>

        <div class="control-group">
            <label>2. VARIABLES (e.g., 1..39 or 1,4)</label>
            <div class="input-row">
                <input type="text" id="pInput" value="11">
                <button onclick="plotData()">PLOT</button>
            </div>
        </div>

        <!--Shell Square: Axes:(n^2 Ã— n^2-2(n-1)); Midpoint: ((n^2)+(n^2-2*(n-1)))/2  -->
        <div class="control-group">
            <label>3. PLOT GEOMETRY</label>
            <select id="plotType" onchange="onPlotChange()">
                <optgroup label="2D Grids">
                    <option value="binary">Binary Grid</option>
                    <option value="ulam">Ulam Spiral</option>
                    <option value="serpentine">Serpentine Square</option>
                    <option value="shell">Shell Square</option> 
                    <option value="hexagon">Centered Hexagon</option>
                </optgroup>
                <optgroup label="Polar Grids">
                    <option value="mod12">Mod 12 Polygon</option>
                </optgroup>
            </select>
        </div>

        <div class="control-group">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" id="showLines" checked onchange="plotData()"> 
                Show Tracking Lines
            </label>
        </div>

        <button onclick="recenterCamera()" style="background: #444; color: #fff; margin-top: 10px;">Recenter View</button>
        <div class="legend">Click & Drag to Pan</div>
    </div>

    <canvas id="gridCanvas"></canvas>

    <div id="statsDisplay" class="stats">System Ready. Select p and Plot...</div>

    <script id="n_data" type="application/json">
        {{ data|tojson|safe }}
    </script>

    <script src="{{ url_for('static', filename='js/2D_polar_grids.js') }}"></script>
    <script src="{{ url_for('static', filename='js/2D_grids.js') }}"></script>
</body>
</html>